<!DOCTYPE html>
<html>
  <head>
    <title>Candyland Roller Coaster</title>
    <meta name="description" content="A-Frame Candyland Roller Coaster">
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-extras@6.1.1/dist/aframe-extras.min.js"></script>
    <script src="https://unpkg.com/aframe-extras@6.1.1/dist/aframe-extras.animations.min.js"></script>
  </head>
  <body>
    <a-scene>
      <!-- Sky and Lighting -->
      <a-sky color="#ffccff"></a-sky>
      <a-light type="ambient" color="#ffffff"></a-light>
      <a-light type="directional" color="#ffffff" position="-1 1 0"></a-light>

      <!-- Candyland Environment -->
      <a-entity geometry="primitive: sphere; radius: 1.5" material="color: pink" position="0 1.5 -5"></a-entity>
      <a-entity geometry="primitive: box; depth: 1; height: 2; width: 1" material="color: red" position="2 1 -3"></a-entity>
      <a-entity geometry="primitive: cylinder; radius: 0.5; height: 2" material="color: purple" position="-2 1 -4"></a-entity>
      <a-entity geometry="primitive: cone; radius-bottom: 1; height: 2" material="color: yellow" position="3 1 -6"></a-entity>
      
      <!-- Roller Coaster Track -->
      <a-curve id="track">
        <a-curve-point position="0 1 0"></a-curve-point>
        <a-curve-point position="1 2 -3"></a-curve-point>
        <a-curve-point position="-1 1 -6"></a-curve-point>
        <a-curve-point position="2 3 -9"></a-curve-point>
        <a-curve-point position="0 1 -12"></a-curve-point>
        <a-curve-point position="3 2 -15"></a-curve-point>
        <a-curve-point position="-3 1 -18"></a-curve-point>
        <a-curve-point position="0 2 -21"></a-curve-point>
        <a-curve-point position="0 1 -24"></a-curve-point>
        <a-curve-point position="1 2 -27"></a-curve-point>
        <a-curve-point position="0 1 -30"></a-curve-point>
        <a-curve-point position="3 2 -33"></a-curve-point>
      </a-curve>
      
      <!-- Camera following the track -->
      <a-entity id="cameraRig" position="0 1.6 0" look-controls>
        <a-entity camera></a-entity>
        <a-entity id="ride" alongpath="curve: #track; dur: 30000; loop: true; rotate: true"></a-entity>
      </a-entity>
    </a-scene>
    <script>
      AFRAME.registerComponent('alongpath', {
        schema: {
          curve: { type: 'selector' },
          dur: { type: 'number', default: 10000 },
          loop: { type: 'boolean', default: false },
          rotate: { type: 'boolean', default: false }
        },
        init: function () {
          this.el.setAttribute('animation', {
            property: 'position',
            dur: this.data.dur,
            easing: 'linear',
            loop: this.data.loop,
            dir: 'normal',
            path: this.data.curve
          });

          if (this.data.rotate) {
            this.el.setAttribute('animation__rotation', {
              property: 'rotation',
              dur: this.data.dur,
              easing: 'linear',
              loop: this.data.loop,
              dir: 'normal',
              to: '0 360 0'
            });
          }
        }
      });
    </script>
  </body>
</html>
